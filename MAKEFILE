#--------------------------------------------------------------------------------------------------
#
# The shorthand notation you think is efficient will definitely become evil in the future.
# Don't do this project.
# Write it completely.
#
#--------------------------------------------------------------------------------------------------
# mingw settings.
#--------------------------------------------------------------------------------------------------
CC = g++
OPTIMIZE = -O2 -std=c++23
#--------------------------------------------------------------------------------------------------
# Summary of basic directories.
#--------------------------------------------------------------------------------------------------
BIN_DIR = ./bin/
SRC_DIR = ./src/
#--------------------------------------------------------------------------------------------------
# Summary of extensions.
#--------------------------------------------------------------------------------------------------
BIN_SF = .exe
OBJ_SF = .o
CPP_SF = .cpp
HPP_SF = .hpp
#--------------------------------------------------------------------------------------------------
# Aggregation and configuration of test modules.
#--------------------------------------------------------------------------------------------------
TEST_MODULE_NAME = App.Test
#--------------------------------------------------------------------------------------------------
TEST_BIN = $(BIN_DIR)$(TEST_MODULE_NAME)$(BIN_SF)
TEST_OBJ = $(BIN_DIR)$(TEST_MODULE_NAME)$(OBJ_SF)

TEST_CPP = $(SRC_DIR)$(TEST_MODULE_NAME)$(CPP_SF)
TEST_HPP = $(SRC_DIR)$(TEST_MODULE_NAME)$(HPP_SF)
#--------------------------------------------------------------------------------------------------
#
# The following are settings for individual libraries and objects.
#
#--------------------------------------------------------------------------------------------------
# OBject Name
#--------------------------------------------------------------------------------------------------
NPL_NAME = NippleTeasing
#--------------------------------------------------------------------------------------------------
# Source Code Dir
#--------------------------------------------------------------------------------------------------
NPL_DIR = ./$(NPL_NAME)/
#--------------------------------------------------------------------------------------------------
# Core Object
#--------------------------------------------------------------------------------------------------
NPL_CORE = $(NPL_NAME)Core
NPL_CORE_OBJ = $(BIN_DIR)$(NPL_CORE)$(OBJ_SF)
NPL_CORE_CPP = $(SRC_DIR)$(NPL_DIR)$(NPL_CORE)$(CPP_SF)
NPL_CORE_HPP = $(SRC_DIR)$(NPL_DIR)$(NPL_CORE)$(HPP_SF)

NPL_IDX = $(NPL_NAME)Index
NPL_IDX_HPP = $(SRC_DIR)$(NPL_DIR)$(NPL_IDX)$(HPP_SF)

#--------------------------------------------------------------------------------------------------
# Collapse objects in this library.
#--------------------------------------------------------------------------------------------------
NPL_OBJ = $(NPL_CORE_OBJ)
#--------------------------------------------------------------------------------------------------
#
# Command processing below.
#
#--------------------------------------------------------------------------------------------------
all : $(TEST_BIN)
#--------------------------------------------------------------------------------------------------
$(TEST_BIN): $(TEST_OBJ) $(NPL_OBJ)
	$(CC) $(OPTIMIZE) -o $@ $^
#--------------------------------------------------------------------------------------------------
$(TEST_OBJ): $(TEST_CPP) $(TEST_HPP) 
	$(CC) $(OPTIMIZE) -c $(TEST_CPP) -o $(TEST_OBJ)
#--------------------------------------------------------------------------------------------------
$(NPL_CORE_OBJ): $(NPL_CORE_CPP) $(NPL_CORE_HPP) $(NPL_IDX_HPP)
	$(CC) $(OPTIMIZE) -c $(NPL_CORE_CPP) -o $(NPL_CORE_OBJ)

#--------------------------------------------------------------------------------------------------
.PHONY: test
test: $(TEST_BIN)
#--------------------------------------------------------------------------------------------------
